\section{Generators}

By sequentially or horizontally composing the \textit{Z Spider} (green) and \textit{X Spider} (red) generators, we can construct undirected multigraphs known as ZX diagrams \cite{Wetering2020}. That is, graphs that allow multiple edges between vertices. Since \textit{only connectivity matters} in the ZX calculus, a valid ZX diagram can be arbitrarily deformed (\textit{d}), provided that the order of inputs and outputs is preserved.

\begin{figure}[H]
\centering
    \centering
    \includegraphics[width=0.8\textwidth]{chapter-2/connectivity}
    \caption{Three equivalent ZX diagrams (\textit{only connectivity matters}).}
    \label{only-connectivity-matters}
\end{figure}

\notation{We interpret the flow of time left to right. Hence, the wires on the left refer to inputs and the wires on the right refer to outputs.}

$Z$ Spiders (green) are defined with respect to the $Z$ eigenbasis (\ref{z-eigenstates}). A $Z$ Spider with $n$ inputs and $m$ outputs represents the following linear map.

\begin{figure}[H]
\centering
\includezxdiagramtext{figures/chapter-2/z_spider}{0.21}{\,
    \ket{0}^{\otimes m} \bra{0}^{\otimes n} + e^{i\alpha}
    \ket{1}^{\otimes m} \bra{1}^{\otimes n}}
\caption{Interpretation of a Z Spider as a linear map.}
\end{figure}

$X$ Spiders (red), are defined with respect to the $X$ eigenbasis (\ref{x-eigenstates}).

\begin{figure}[H]
\centering
\includezxdiagramtext{figures/chapter-2/x_spider}{0.21}{\,
    \ket{+}^{\otimes m} \bra{+}^{\otimes n} + e^{i\alpha}
    \ket{-}^{\otimes m} \bra{-}^{\otimes n}}
\caption{Interpretation of an X Spider as a linear map.}
\end{figure}

We can represent the $Z$ eigenstates using an $X$ spider with a phase of $0$ or $\pi$.

\begin{figure}[H]
\centering
\begin{minipage}{.4\textwidth}
    \centering
    \includezxdiagramtext{figures/chapter-2/zero_state}{0.15}{\,
        \ket + + \ket - = \sqrt{2} \ket 0}
    \caption{$\ket 0$ eigenstate}
\end{minipage}%
\begin{minipage}{.4\textwidth}
    \centering
    \includezxdiagramtext{figures/chapter-2/one_state}{0.16}{\,
    \ket + - \ket - = \sqrt{2} \ket 1}
    \caption{$\ket 1$ eigenstate}
    \label{z-eigenstates-zx}
\end{minipage}
\end{figure}

Similarly, we represent the $X$ eigenstates using the corresponding $Z$ spiders.

\begin{figure}[H]
\centering
\begin{minipage}{.4\textwidth}
    \centering
    \includezxdiagramtext{figures/chapter-2/plus_state}{0.15}{\,
        \ket 0 + \ket 1 = \sqrt{2} \ket +}
    \caption{$\ket +$ eigenstate}
\end{minipage}%
\begin{minipage}{.4\textwidth}
    \centering
    \includezxdiagramtext{figures/chapter-2/minus_state}{0.16}{\,
    \ket 0 - \ket 1 = \sqrt{2} \ket -}
    \caption{$\ket -$ eigenstate}
    \label{x-eigenstates-zx}
\end{minipage}
\end{figure}

Arbitrary single-qubit rotations (\ref{z-rotation-definition}) in the $Z$ basis are represented by a $Z$ Spider with a single input and a single output. Similarly, we have that the corresponding rotation in the $X$ basis is represented by an $X$ spider. We can view these as rotations of the Bloch sphere.

\includezxdiagramtextplus{figures/chapter-2/z_rotation}{0.11}{
    \ket{0} \bra{0} + e^{i\alpha}
    \ket{1} \bra{1} = 
    \begin{pmatrix} 1 & 0 \\ 0 & e^{i\alpha} \end{pmatrix}
    \rightarrow
}
{chapter-1/z_rotation}{0.18}
\vspace*{-15pt}
\includezxdiagramtextplus{figures/chapter-2/x_rotation}{0.11}{
    \ket{+} \bra{+} +
    e^{i\alpha} \ket{-} \bra{-} = 
    \frac{1}{2} \begin{pmatrix}
    1 + e^{i\alpha} & 1 - e^{i\alpha} \\
    1 - e^{i\alpha} & 1 + e^{i\alpha}
    \end{pmatrix}
    \rightarrow
}
{chapter-1/x_rotation}{0.17}

We can recover the Pauli $Z$ and Pauli $X$ matrices (\ref{pauli-matrices}) by setting $\alpha = \pi$.

\begin{figure}[H]
\centering
\includezxdiagramtext{figures/chapter-2/pauli_z}{0.11}{
    \ket{0} \bra{0} + e^{i\pi} \ket{1} \bra{1} = 
    \begin{pmatrix} 1 & \,\,0 \\ 0 & -1 \end{pmatrix}
}
\includezxdiagramtext{figures/chapter-2/pauli_x}{0.11}{
    \ket{+} \bra{+} + e^{i\pi} \ket{-} \bra{-} = 
    \begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix}
}
\caption{Pauli $Z$ and $X$ gates in the ZX calculus.}
\end{figure}

%%%

\subsection{Composition}%
\label{composition}

To calculate the matrix of a ZX diagram consisting of sequentially composed spiders, we take the matrix product. Note that the order of operation of matrix multiplication is the reverse of how we have defined it for ZX diagrams.

\includezxdiagramtext{chapter-2/sequential}{0.27}{\frac{1}{2}
\begin{pmatrix} 1 & 0 \\ 0 & e^{i\gamma} \end{pmatrix}
\begin{pmatrix}
    1 + e^{i\beta} & 1 - e^{i\beta} \\
    1 - e^{i\beta} & 1 + e^{i\beta}
\end{pmatrix}
\begin{pmatrix} 1 & 0 \\ 0 & e^{i\alpha} \end{pmatrix}}

In contrast, by composing spiders in parallel, we obtain the tensor product. Note that the order of operation should be interpreted from top to bottom.

\includezxdiagramtext{chapter-2/parallel}{0.105}{\frac{1}{2}
\begin{pmatrix} 1 & 0 \\ 0 & e^{i\alpha} \end{pmatrix} \otimes
\begin{pmatrix}
    1 + e^{i\beta} & 1 - e^{i\beta} \\
    1 - e^{i\beta} & 1 + e^{i\beta}
\end{pmatrix}}

The CNOT gate (\ref{cnot-definition}) is represented in the ZX calculus by a $Z$ spider (control qubit) and an $X$ spider (target qubit). We can arbitrarily deform the diagram and decompose it into matrix and tensor products as follows.

\includezxdiagram{chapter-2/cnot_def}{0.65}

We can calculate matrix $A$, consisting of a single-input and two-output $Z$ Spider ($4 \times 2$ matrix) and an empty wire (identity matrix), by taking the tensor product.

\includezxdiagramtext{chapter-2/A_def}{0.33}{
\begin{pmatrix}
    1 & 0 \\
    0 & 0 \\
    0 & 0 \\
    0 & 1
\end{pmatrix} \otimes
\begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix}}

Similarly, to calculate the matrix $B$, we take the following tensor product.

\includezxdiagramtext{chapter-2/B_def}{0.33}{
\begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} \otimes \frac{1}{\sqrt 2}
\begin{pmatrix} 1 & 0 & 0 & 1 \\ 0 & 1 & 1 & 0 \end{pmatrix}}

We can then calculate the CNOT matrix by taking the matrix product of matrix $A$ and matrix $B$ as follows (up to a global scalar factor of $1/\sqrt 2$).

\includezxdiagramtext{chapter-2/cnot}{0.10}{
    \Bigg[
    \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} \otimes \frac{1}{\sqrt 2}
    \begin{pmatrix} 1 & 0 & 0 & 1 \\ 0 & 1 & 1 & 0 \end{pmatrix} \Bigg]
    %
    \left[ \begin{pmatrix}
        1 & 0 \\
        0 & 0 \\
        0 & 0 \\
        0 & 1 \\
    \end{pmatrix} \otimes
    \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} \right] \simeq
    %
    \begin{pmatrix}
    1 & 0 & 0 & 0 \\
    0 & 1 & 0 & 0 \\
    0 & 0 & 0 & 1 \\
    0 & 0 & 1 & 0
    \end{pmatrix}
}

% Since \textit{only connectivity matters} (\ref{only-connectivity-matters}), we could have equivalently calculated the matrix of the CNOT gate by deforming the diagram as follows.

% \vspace{10pt}
% \includezxdiagram{chapter-2/cnot_def2}{0.65}

Had we chosen to make the first qubit the target and the second qubit the control, we would have instead obtained the following matrix.

\includezxdiagramtext{chapter-2/cnot2}{0.10}{
\Bigg[
\frac{1}{\sqrt 2}
\begin{pmatrix} 1 & 0 & 0 & 1 \\ 0 & 1 & 1 & 0 \end{pmatrix} \otimes 
\begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix}
\Bigg]
%
\left[
\begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} \otimes
\begin{pmatrix} 1 & 0 \\ 0 & 0 \\ 0 & 0 \\ 0 & 1 \end{pmatrix}
\right] \simeq
%
\begin{pmatrix}
1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 \\
0 & 0 & 1 & 0 \\
0 & 1 & 0 & 0 \\
\end{pmatrix}}

%%%

\subsection{Hadamard Generator}

Up to a global phase, an arbitrary single qubit gate $U$ can be viewed as a rotation of the Bloch sphere about some axis. Therefore, we can decompose $U$ using Euler angles to represent it as three successive rotations \cite{Wetering2020}.

\includezxdiagram{chapter-2/unitary}{0.5}

The Hadamard gate $H$ (\ref{hadamard-definition}) corresponds to a rotation of the Bloch sphere $\pi$ radians about the line bisecting the $X$ and $Z$ axes. Up to a global phase of $\text{exp} \left(-i \frac{\pi}{4} \right)$, it can be decomposed into three successive rotations by choosing $\alpha = \beta = \gamma = \frac{\pi}{2}$. 

\includezxdiagramtext{figures/chapter-2/hadamard}{0.46}{
\frac{1}{\sqrt 2}
\begin{pmatrix} 1 & 1 \\ 1 & -1 \end{pmatrix}}

% There are many equivalent ways of decomposing the Hadamard gate $H$ using Euler angles (see Appendix \ref{appendix-hadamard}).

Recall that the Hadamard gate is the member of the Clifford group that switches between the $Z$ and $X$ bases (\ref{hadamard-definition}). Hence, diagrammatically, applying Hadamard generators to all of the legs of a spider changes the colour of the spider.

\includezxdiagram{chapter-2/colour_changing}{0.45}

The CZ  gate applies the Pauli $Z$ gate to the target qubit \textit{iff} the control qubit is in the $\ket 1$ state. It is diagonal in the $Z$ basis and has a symmetric representation in the ZX calculus. It can be derived by conjugating the target of the CNOT gate with Hadamards, then applying the Hadamard commutation rule (\ref{hadamard-commutation}).

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-2/cz}{0.42}
    \caption{The CZ gate in the ZX calculus.}
\end{figure}

%%%

% \subsection{Conjugate, Transpose and Adjoint}

% We can find the transpose of a ZX diagram by turning all of its inputs into outputs and all of its outputs into inputs whilst preserving the order of their wires.

% \includezxdiagram{chapter-2/transpose}{1}

% We can find the conjugate of a ZX diagram by simply negating the phases of all spiders in the diagram, $\alpha \rightarrow -\alpha, \,\, \beta \rightarrow -\beta, \dots$.

% \includezxdiagram{chapter-2/conjugate}{0.6}

% It is then a simple matter to find the Hermitian adjoint of a ZX diagram by first finding its conjugate, then its transpose.

% \includezxdiagram{chapter-2/adjoint}{0.6}

