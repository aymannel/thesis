\section{Commutation Relations}%
\label{commutation-relations}

A pair of Pauli gadgets commute when their Hamiltonians commute. That is, a pair of Pauli gadgets commute when the Pauli strings that they are defined by also commute. Diagrammatically, we have that a pair of Pauli gadgets commute when they \textit{mismatch on an even number of legs} \cite{Yeung2020}. Let us demonstrate this by first considering the three possible mismatching pairs of Pauli gadget legs.

\includezxdiagram{chapter-3/mismatches}{1}

Starting with the mismatching $Z$/$X$ pair and using the bialgebra (\ref{bialgebra}), Hadamard commutation (\ref{hadamard-commutation}) and spider fusion (\ref{spider-fusion}) rules, we can show that commuting the gadgets' legs introduces a Hadamard between the bodies of the gadgets \cite{Yeung2020}.

\includezxdiagram{chapter-3/mismatch_proof}{1}

Similarly, for the $X$/$Y$ and $Y$/$Z$ mismatching pairs, we have the following.

\includezxdiagram{chapter-3/mismatch_proof2}{0.7}

Therefore, we can show that two Pauli gadgets with an even number of mismatching legs commute by first commuting all of their legs, then using the Hopf rule (\ref{hopf}) to remove the wires between them \cite{Yeung2020}.

\includezxdiagram{chapter-3/mismatch_proof3}{0.8}

\subsection{Clifford Commutation Relations}%
\label{clifford-commutation-relations}

We now develop a set of \textit{commutation relations} describing the interaction of Pauli gadgets with members of the Clifford group. Diagrammatically, we interpret this as `what happens when a Clifford gate is pushed through a Pauli gadget'.

By definition, conjugating a Pauli string by a member of the Clifford group, $C^\dagger P \, C$, is closed in the set of Pauli strings, $\{I, X, Y, Z\}^{\otimes n}$, where $n$ is the number of qubits that the Pauli string acts on. Similarly, conjugating a Pauli gadget $\Phi(\theta)$ by a member of the Clifford group always yields another Pauli gadget $\Phi'(\theta) = C^\dagger \Phi(\theta) C$.

Taking $C = \text{CNOT}_{1, 2}$, we can interpret the conjugation of a \textit{phase gadget} diagrammatically (diagram on left) as the phase gadget decomposition result (\ref{phase-gadget-decomposition}). Recalling that the members of the Clifford group are unitary transformations, $C^{-1} = C^\dagger$, we define \textit{commutation relation} as $\Phi(\theta) C = C \, \Phi'(\theta)$ (diagram on right).

\includezxdiagram{chapter-3/commutation}{1}

Since the CNOT (\ref{cnot-definition}) and CZ (\ref{cz-definition}) gates act on two qubits ($n=2$), we can form 16 unique Pauli gadgets from the set of Pauli strings $\{I, X, Y, Z\}^{\otimes 2}$. Consequently, we must derive 16 commutation relations to fully describe the interaction of Pauli gadgets with the CNOT and CZ gates.

Whilst it is possible to derive each of these commutation relations directly, it can be shown, through the relevant Taylor expansion, that conjugating a Pauli gadget is equivalent to finding the one parameter unitary group of the corresponding conjugated Pauli string. In other words, identifying how a Pauli string interacts with Clifford gates tells us how the corresponding Pauli gadget behaves.

Let us illustrate this with an example. Using the $Z \otimes Z$ Pauli string, we show that the $\text{CNOT}_{0, 1}$ gate commutes through the $\text{exp} \left[ - i\frac{\theta}{2} \left( Z \otimes Z \right) \right]$ gadget to give the $\text{exp} \left[ - i\frac{\theta}{2} \left( I \otimes Z \right) \right]$ gadget. We first push the bottom Pauli $Z$ gate through the CNOT target using the $\pi$ copy rule (\ref{pi-copy}), then, we push the top Pauli $Z$ gate through the CNOT control using the spider fusion rule (\ref{spider-fusion}), cancelling one of the copied Pauli $Z$ gates in the process.

\includezxdiagram{chapter-3/commutation_trick}{1}

The Pauli $Y$ gate is obtained by conjugating the Pauli $Z$ gate with Clifford gates (\ref{pauli-Y}). Using the $\pi$ copy (\ref{pi-copy}) and spider fusion (\ref{spider-fusion}) rules, we can show that $Y=XZ$ up to a global phase of $i$ and $Y=ZX$ up to a global phase of $-i$.

\includezxdiagram{chapter-3/clifford_conjugation}{1}

In the example below, one of the definitions of the Pauli $Y$ gate above to derive how the $\text{CNOT}$ gate interacts with the $\text{exp} \left[ - i\frac{\theta}{2} \left(Y \otimes X \right) \right]$ Pauli gadget by identifying how it gate interacts with the $Y \otimes X$ Pauli string.

\includezxdiagram{chapter-3/commutation_trick_YX}{0.95}

Similarly, we can identify how single-qubit gates interact with Pauli gadgets by identifying how they interact with the Pauli gates. In the example below, we use the fact that the above definitions of the Pauli $Y$ gate differ by a factor of $-1$ to show that commuting a Hadamard through a $Y$ leg flips the gadget's phase.

\includezxdiagram{chapter-3/single_qubit_clifford}{0.9}

Using the rules described in this section, we were able to identify how Pauli gadgets interact with the Clifford and Pauli gates, in agreement with \cite{Yeung2020} and \cite{Cowtan2019}. We have summarised these commutation relations below. In Chapter \ref{excitation-operators}, we demonstrate how these commutation relations can be used to prove several important results.

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/cnot_commutations}{0.9}
    \caption{CNOT commutation relations excluding repetitions.}
    \label{cnot-commutations}
\end{figure}

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/cz_commutations}{0.9}
    \caption{CZ commutation relations excluding repetitions.}
    \label{cz-commutations}
\end{figure}

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/pauli_commutations}{0.9}
    \caption{Pauli commutation relations.}
    \label{pauli-commutations}
\end{figure}

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/clifford_z_commutations}{0.9}
    \caption{Clifford $Z$ commutation relations.}
    \label{clifford-z-commutations}
\end{figure}

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/clifford_x_commutations}{0.9}
    \caption{Clifford $X$ commutation relations.}
    \label{clifford-x-commutations}
\end{figure}

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/clifford_h_commutations}{0.9}
    \caption{Hadamard commutation relations.}
    \label{clifford-h-commutations}
\end{figure}

