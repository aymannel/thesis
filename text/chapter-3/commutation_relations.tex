\section{Commutation Relations}%
\label{commutation-relations}

A pair of Pauli gadgets commute when their Hamiltonians commute \cite{Yeung2020}. That is, a pair of Pauli gadgets commute when the Pauli strings that they are defined by also commute. Diagrammatically, we have that a pair of Pauli gadgets commute when they \textit{mismatch on an even number of legs} \cite{Yeung2020}. Let us demonstrate this by first considering the three possible mismatching pairs of Pauli gadget legs.

\includezxdiagram{chapter-3/mismatches}{1}

Starting with the mismatching $Z$/$X$ pair and using the bialgebra (\ref{bialgebra}), Hadamard commutation (\ref{hadamard-commutation}) and spider fusion (\ref{spider-fusion}) rules, we can show that commuting the gadgets' legs introduces a Hadamard between the bodies of the gadgets. \cite{Yeung2020}.

\includezxdiagram{chapter-3/mismatch_proof}{1}

Similarly, for the $X$/$Y$ and $Y$/$Z$ mismatching pairs, we have the following.

\includezxdiagram{chapter-3/mismatch_proof2}{0.7}

Therefore, we can show that two Pauli gadgets with an even number of mismatching legs commute by first commuting all of their legs, then using the Hopf rule (\ref{hopf}) to remove the wires between them.

\includezxdiagram{chapter-3/mismatch_proof3}{0.8}

\subsection{Clifford Commutation Relations}%
\label{clifford-commutation-relations}

We will now develop a set of \textit{commutation relations} describing the interaction of Pauli gadgets with members of the Clifford group. Diagrammatically, we interpret this as `what happens when a Clifford gate is pushed through a Pauli gadget'.

By definition, conjugating a Pauli string by a member of the Clifford group, $C^\dagger P \, C$, is closed in the set of Pauli strings, $\{I, X, Y, Z\}^{\otimes n}$, where $n$ is the number of qubits that the Pauli string acts on. Similarly, conjugating a Pauli gadget $\Phi(\theta)$ by a member of the Clifford group always yields another Pauli gadget $\Phi'(\theta) = C^\dagger \Phi(\theta) C$.

We can interpret the conjugation of \textit{phase gadgets} by CNOT gates diagrammatically as the phase gadget decomposition result (see diagram on the left). Recalling that the members of the Clifford group are unitary transformations, $C^{-1} = C^\dagger$, we can define \textit{commutation relation} as $\Phi(\theta) C = C \, \Phi'(\theta)$ (see diagram on the right).

\includezxdiagram{chapter-3/commutation}{1}

Since the CNOT gate acts on two qubits ($n=2$), we can form 16 unique Pauli gadgets from the set of Pauli strings $\{I, X, Y, Z\}^{\otimes 2}$. Consequently, we must derive 16 commutation relations to fully describe the interaction of Pauli gadgets with the CNOT gate. Similarly, there are 16 commutation relations describing the interaction of Pauli gadgets with the CZ gate.

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/CNOT_examples}{0.9}
    \caption{Example commutation relations. See Appendix \ref{commutation-relations} for the complete set.}
\end{figure}

Whilst it is possible to derive each of these commutation relations directly, it can be shown, through the relevant Taylor expansion, that conjugating a Pauli gadget is equivalent to finding the one parameter unitary group of the corresponding conjugated Pauli string. In other words, identifying how a Pauli string interacts with Clifford gates tells us how the corresponding Pauli gadget behaves.

Let us illustrate this with an example. Using the $Z \otimes Z$ Pauli string, we show that the $\text{CNOT}_{0, 1}$ gate commutes through the $\text{exp} \left[ - i\frac{\theta}{2} \left( Z \otimes Z \right) \right]$ gadget to give the $\text{exp} \left[ - i\frac{\theta}{2} \left( I \otimes Z \right) \right]$ gadget. We first push the bottom Pauli $Z$ gate through the CNOT target using the $\pi$ copy rule (\ref{pi-copy}), then, we push the top Pauli $Z$ gate through the CNOT control using the spider fusion rule (\ref{spider-fusion}), cancelling one of the copied Pauli $Z$ gates in the process.

\includezxdiagram{chapter-3/commutation_trick}{0.68}

Recall that up to a global phase of $-i$, the Pauli $Y$ gate can be expressed as a Pauli $X$ gate followed by a Pauli $Z$ gate (\ref{pauli-Y}). We can, therefore, derive how the $\text{CNOT}_{0, 1}$ gate interacts with the $\text{exp} \left[ - i\frac{\theta}{2} \left(Y \otimes X \right) \right]$ Pauli gadget by identifying how the CNOT$_{0, 1}$ gate interacts with the $Y \otimes X$ Pauli string.

\includezxdiagram{chapter-3/commutation_trick_YX}{1}

Similarly, identifying how single-qubit Clifford gates interact with Pauli gadgets amounts to identifying how they interact with the Pauli gates. Importantly, if the phase of the Pauli gate is flipped, we must also flip the phase of the corresponding Pauli gadget.

\includezxdiagram{chapter-3/single_qubit_clifford}{0.55}

% \subsection{Pauli Commutation Relations}

% The Pauli gates commute through Pauli strings by applying a global phase but leaving the Pauli string unchanged.

% \includezxdiagram{chapter-3/commutation_paulis}{1}

% \subsection{Clifford Tableaus}

% Richie Yeung pointed out late during the preparation of this thesis that a more efficient method of identifying such commutation relations is instead to construct a Clifford tableau as in Winderl \textit{et al} \cite{Yeung2023}. Nevertheless, the diagrammatic method introduced in this chapter allowed us to derive all 16 CNOT commutation relations (Appendix \ref{cnot_commutations}). In Chapter \ref{zxfermion}, we choose to implement these commutation relations in our software package ZxFermion using Stim's (Clifford) \lstinline{Tableau} class.
