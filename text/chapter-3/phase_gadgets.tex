\section{Phase Gadgets}
Phase gadgets are defined as the one parameter unitary groups of Pauli strings consisting of only the Pauli $I$ and $Z$ matrices, $P \in \{I, Z\}^{\otimes n}$. They can be naively implemented as a $Z$ rotation sandwiched between two ladders of CNOT gates.

\includezxdiagramtext{chapter-3/phase_gadget_expanded}{0.28}
{\text{exp} \left( - i \frac{\theta}{2} Z \otimes Z \otimes Z \right)}

Phase gadgets correspond to unitary maps which are diagonal in the $Z$ computational basis \cite{Cowtan2020}. Consequently, they apply a global phase to a state without changing the distribution of the observed state \cite{Yeung2020}. Phase gadgets have the following representation in the ZX calculus.

\includezxdiagramtext{chapter-3/phase_gadget}{0.18}{
\text{exp} \left( - i \frac{\theta}{2} Z \otimes Z \otimes Z \right)
% = \begin{pmatrix}
%     \theta_{12} & \dots & \theta_{13} \\
%     \vdots & \ddots & \vdots \\
%     \theta_{12} & \dots & \theta_{13}
% \end{pmatrix}
}

Phase gadgets can be interpreted as first copying each input in the $Z$ basis (\ref{copy}), computing the parity of the state by taking the XOR (\ref{xor}), then multiplying the state by $\text{exp} \left(-i\frac{\theta}{2} \right)$ or $\text{exp} \left(i\frac{\theta}{2} \right)$ depending on the state's parity \cite{Yeung2020}.

By deforming the phase gadget in quantum circuit notation and using the identity (\ref{identity}), spider fusion (\ref{spider-fusion}) and bialgebra (\ref{bialgebra}) rules, we are able to show the correspondence with its form in the ZX calculus -- \textit{phase gadget result} (\textit{g}).

\includezxdiagram{chapter-3/phase_gadget_proof}{0.75}

It is then a simple matter of recursively applying this result to phase gadgets in quantum circuit notation to generalise to arbitrary arity.

\includezxdiagram{chapter-3/phase_gadget_proof2}{0.8}%
\label{phase-gadget-proof}

As well as being intuitively self-transpose, and hence diagonal, this representation comes equipped with various rules describing the interactions of phase gadgets. 

%%%

\subsubsection{Phase Gadget Identity}%
\label{phase-gadget-identity}

Phase gadgets with an angle $\theta = 0$ can be shown to be equivalent to identity using the state copy (\ref{state-copy}), spider fusion (\ref{spider-fusion}) and identity removal (\ref{identity}) rules.

\includezxdiagram{chapter-3/phase_gadget_identity}{0.8}

%%%

\subsubsection{Phase Gadget Fusion}%
\label{phase-gadget-fusion}

Any two adjacent phase gadgets formed from the same Pauli string fuse and their phases add. This is achieved using the spider fusion rule (\ref{spider-fusion}) and the bialgebra rule (\ref{bialgebra}). See Appendix  \ref{appendix-phase-gadget-fusion} for the intermediate steps.

\includezxdiagram{chapter-3/phase_gadget_fusion}{0.55}

%%%

\subsubsection{Phase Gadget Commutation}%
\label{phase-gadget-commutation}

Phase gadgets can be shown to commute using the spider fusion rule (\ref{spider-fusion}).

\includezxdiagram{chapter-3/phase_gadget_commutation}{0.6}

%%%

\subsubsection{Phase Gadget Decomposition}%

Using the bialgebra rule (\ref{bialgebra}), we can show that a two-legged phase gadget can be decomposed in the following two ways.

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-3/phase_gadget_decomposition1}{0.6}
    \caption{Phase gadget decomposition result.}
    \label{phase-gadget-decomposition}
\end{figure}

By recursively applying this decomposition result, we can show that it is possible to decompose a phase gadget such that it has a circuit depth of $\log_2(n)$ instead of $n$, where $n$ is the number of qubits.

\includezxdiagram{chapter-3/phase_gadget_decomposition}{1}

Let us now consider a single-legged phase gadget. Using the bialgebra (\ref{bialgebra}), spider fusion (\ref{spider-fusion}), state copy (\ref{state-copy}) and identity (\ref{identity}) rules, we can demonstrate its correspondence to a rotation in the $Z$ basis.

\label{phase-gadget-single-leg}
\includezxdiagram{chapter-3/phase_gadget_single_leg_steps}{0.75}

Phase gadgets can, therefore, be thought of as the many-qubit generalisation of a rotation in the $Z$ basis \cite{Yeung2020}. 

