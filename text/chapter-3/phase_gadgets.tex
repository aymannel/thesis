\section{Phase Gadgets}
Missing:
\begin{enumerate}
    \item matrix representation
    \item relation to chemistry

\end{enumerate}

A Pauli string $P$ is defined as a tensor product of the members of the Pauli group $P \in \{I, Y, Z, X\}^{\otimes n}$, where each Pauli operator acts on a distinct qubit. Note that since the Pauli matrices are Hermitian, so are Pauli strings. Thus $Z \otimes Y \otimes X = Z \, YX$ means apply Pauli $Z$, $Y$ and $X$ to qubits 0, 1 and 2 respectively.

\textit{Stone's Theorem} \cite{Stone1932} states that a strongly continuous one parameter unitary group $U(\theta)$ is generated by a Hermitian operator, $P$.
\begin{equation*}
    U(\theta) = \text{exp}\left(i \frac{\theta}{2} P \right)
    \quad \text{where} \quad
    e^X = 1 + X + \frac{1}{2} X^2 + \frac{1}{6} X^3 + \dots
\end{equation*}

There is therefore a one-to-one correspondence between Hermitian operators and one parameter unitary groups \cite{Yeung2020}. The time evolution of a quantum mechanical system, described by the Hamiltonian $H$, is defined by the one parameter unitary group $e^{itH}$, whilst arbitrary rotation gates in the $Z$, $X$ and $Y$ bases are described by the one parameter unitary groups of the Pauli matrices $Z$, $X$ and $Y$.
\begin{equation*}
    R_Z(\theta) = \text{exp}\left(i \frac{\theta}{2} Z \right) \qquad
    R_Y(\theta) = \text{exp}\left(i \frac{\theta}{2} Y \right) \qquad
    R_X(\theta) = \text{exp}\left(i \frac{\theta}{2} X \right)
\end{equation*}

Phase gadgets are defined as the one parameter unitary groups of Pauli strings consisting of the $I$ and $Z$ matrices, $P \in \{I, Z\}^{\otimes n}$.
\begin{equation*}
    \Phi_1(\theta) = \text{exp} \left[
    i\frac{\theta}{2} (I \otimes Z \otimes Z \otimes \dots)
    \right] \qquad
    %
    \Phi_2(\theta) = \text{exp} \left[
    i\frac{\theta}{2} (Z \otimes Z \otimes Z \otimes \dots)
    \right] \qquad
\end{equation*}

In quantum circuit notation, phase gadgets are represented by a layer of CNOTs followed by a rotation in the $Z$ basis, and finally another layer of CNOTS.

\includezxdiagramtext{chapter-3/phase_gadget_expanded}{0.33}
{\text{exp} \left( i \frac{\theta}{2} Z \otimes Z \otimes Z \right)}

The first layer of CNOTs can be thought of as computing the parity of the input state by entangling the qubits. The $Z$ rotation then rotates the entangled state by $e^{i\theta/2}$ or $e^{-i\theta/2}$, depending on the parity of the state. The final layer of CNOTs can then be thought of as uncomputing the parity.

Phase gadgets necessarily correspond to diagonal unitary matrices in the $Z$ basis since they apply a global phase to a given state without changing the distribution of the observed state \cite{Yeung2020}. This diagonal action suggests that a symmetric ZX diagram exists for phase gadgets, as is indeed the case.

\includezxdiagramtext{chapter-3/phase_gadget_expanded_to_zx}{0.6}
{\text{exp} \left( i \frac{\theta}{2} Z \otimes Z \otimes Z \right)}

% \includeZxEqZxEq
% {chapter-3/ZIZ}{0.18}
% {=\, \text{exp} \left( i \frac{\theta}{2} Z \otimes I \otimes Z \right)}
% {chapter-3/ZZZ}{0.18}
% {=\, \text{exp} \left( i \frac{\theta}{2} Z \otimes Z \otimes Z \right)}

By deforming \textit{d} our phase gadget in quantum circuit notation and using the identity \textit{id} (\ref{identity}), spider fusion \textit{f} (\ref{spider-fusion}) and bialgebra \textit{ba} (\ref{bialgebra}) rules, we are able to show the correspondence with its form in the ZX calculus.

\includezxdiagram{chapter-3/phase_gadget_proof}{0.85}

It is then a simple matter of recursively applying this proof to phase gadgets in quantum circuit notation to generalise to arbitrary arity.

\includezxdiagram{chapter-3/phase_gadget_proof2}{0.9}

Not only is this representation intuitively self-transpose, but it comes equipped with various rules describing its interaction with other phase gadgets and quantum gates.

%%%

\subsection{Phase Gadget Identity Rule}%
\label{phase-gadget-identity}

Phase gadgets with an angle $\theta = 0$ can be shown to be equivalent to identity using the state copy (\ref{state-copy}), spider fusion (\ref{spider-fusion}) and identity removal (\ref{identity}) rules.

\includezxdiagram{chapter-3/phase_gadget_identity}{0.95}

%%%

\subsection{Phase Gadget Fusion Rule}%
\label{phase-gadget-fusion}

Any two adjacent phase gadgets formed from the same Pauli string fuse and their phases add. This is achieved using the spider fusion rule (\ref{spider-fusion}) and the bialgebra rule (\ref{bialgebra}). See Appendix  \ref{phase_gadget_fusion_steps} for the intermediate steps marked *.

\includezxdiagram{chapter-3/phase_gadget_fusion}{0.5}

%%%

\subsection{Phase Gadget Commutation Rule}%
\label{phase-gadget-commutation}

Any two adjacent phase gadgets commute, as can be shown using the spider fusion rule \ref{spider-fusion} (fuse then unfuse the legs \ref{spider-fusion}).

\includezxdiagram{chapter-3/phase_gadget_commutation}{0.60}

%%%

\subsection{Single-Legged Phase Gadgets}%
\label{phase-gadget-single-leg}

We can show that a single-legged phase gadget is equivalent to a $Z$ rotation using the bialgebra (\ref{bialgebra}), spider fusion (\ref{spider-fusion}), state copy (\ref{state-copy}) and identity (\ref{identity}) rules.

\includezxdiagram{chapter-3/phase_gadget_single_leg}{0.85}

%%%

\subsection{Phase Gadget Decomposition}%
\label{phase-gadget-decomposition}

-- show different ways of decomposing a phase gadget and log reduction in cnot depth
-- show how we can derive commutation of cnots through phase gadgets using this rule

