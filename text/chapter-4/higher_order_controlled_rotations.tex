\section{Higher Order Controlled-Rotations}

We can implement higher order controlled rotations by nesting singly-controlled rotations in CNOT gates as in Yordanov \textit{et al} \cite{Yordanov2020}. We implement a doubly-controlled $Z$ rotation using two singly-controlled $Z$ rotations with opposite phases.

\includezxdiagram{chapter-4/CCRZ1}{0.65}

We can minimise the depth of the circuit implementing the CCR$_Z$ gate by choosing specific decompositions of the CR$_Z$ gate such that one pair of $\text{CNOT}_{1, 2}$ are adjacent and cancel one-another (see diagram on the right) \cite{Yordanov2020}.

\begin{figure}[H]
    \centering
    \includezxdiagram{chapter-4/CCRZ2}{1}
    \caption{CCR$_Z$ circuit decomposition (left). Cancelling CNOT gate pair (right).}
\end{figure}

For the purposes of this thesis, we are interested in the form of controlled rotations in terms of Pauli gadgets. By expressing all $Z$ rotations as phase gadgets (\ref{phase-gadget-single-leg}) and commuting all CNOT gates through them such that the CNOT gates cancel, we obtain a phase polynomial consisting of four phase gadgets.

\includezxdiagram{chapter-4/CCRZ3}{0.9}

We can build controlled rotations to arbitrary arity by recursively applying the method of nesting controled rotations described above. Hence, as with the doubly-controlled rotation, we can construct triply-controlled rotations by nesting doubly-controlled rotations. Below is one specific implementation of a triply-controlled $Z$ rotation, with the largest number of adjacent CNOT gates.

\includezxdiagram{chapter-4/CCCRZ}{1}

Using the same rules as before, we can show that a triply-controlled $Z$ rotation corresponds to a phase polynomial consisting of eight commuting phase gadgets.

\includezxdiagram{chapter-4/CCCRZ_zx}{0.8}

